<html>

<head>
<meta http-equiv="Content-Language" content="ru">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Класс FarString</title>
<style>
<!--
pre.example     { background-color: #E0E0E0 }
-->
</style>
</head>

<body>

<h1 align="center">Класс FarString</h1>
<p><span lang="ru">Класс </span>FarString <span lang="ru">представляет собой 
компактную и эффективную реализацию класса &quot;строка </span>ASCII-<span lang="ru">символов&quot;. 
Использование этого класса влечет существенно меньшие затраты по объему кода 
плагина, чем, например, использование класса </span>std::string <span lang="ru">
из стандартной библиотеки </span>STL. <span lang="ru">Класс </span>FarString
<span lang="ru">реализован с использованием механизма подсчета ссылок, поэтому 
операции копирования строки влекут за собой минимальные накладные расходы. Это, 
в частности, делает оправданным возвращение из функций экземпляров </span>
FarString <span lang="ru">по значению. Кроме того, </span><span lang="en-us">
FarString </span>использует принцип &quot;выделения памяти с запасом&quot;, позволяющий 
увеличить эффективность операций конкатенации строк.</p>
<h2><span lang="ru">Методы</span></h2>
<pre><font COLOR="#00005e">FarString</font>()</pre>
<blockquote>
  <p><span lang="ru">Конструктор по умолчанию. </span>FarString <span lang="ru">
  инициализируется пустой строкой.</span></p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">text</font>)</pre>
<blockquote>
  <p><span lang="ru">Конструктор, инициализирующий </span><span lang="en-us">
  FarString </span>указанной <span lang="en-us">null-terminated </span>строкой.<span lang="en-us">
  </span>Если<span lang="en-us"> text = NULL, </span>инициализирует
  <span lang="en-us">FarString </span>пустой строкой.</p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">text</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">length</font>)</pre>
<blockquote>
  <p>Конструктор, инициализирующий <span lang="en-us">FarString </span>
  последовательностью символов указанной длины. <span lang="en-us">text </span>
  не может быть равен <span lang="en-us">NULL.</span></p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> (<font COLOR="#0000ff">char</font> <font COLOR="#00008b">c</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">nCount</font>)</pre>
<blockquote>
  <p>Конструктор, создающий строку из <span lang="en-us">nCount </span>копий 
  символа <span lang="en-us">c.</span></p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> (<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#00008b">str</font>)</pre>
<blockquote>
  <p>Конструктор копирования.</p>
</blockquote>
<pre><font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#0000ff">operator</font>= (<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#00008b">rhs</font>)
<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#0000ff">operator</font>= (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">text</font>)
<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#0000ff">operator</font>= (<font COLOR="#0000ff">char</font> <font COLOR="#00008b">ch</font>)</pre>
<blockquote>
  <p>Оператор присваивания.</p>
</blockquote>
<pre><font COLOR="#0000ff">operator</font> <font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font>*() <font COLOR="#0000ff">const
const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#880000">c_str</font>() <font COLOR="#0000ff">const</font></pre>

<blockquote>
  <p>Оператор и функция для преобразования <span lang="en-us">FarString </span>в стандартную
  <span lang="en-us">C-</span>строку. Неявное преобразование поддерживается 
  только для константных строк; если необходимо передать <span lang="en-us">
  FarString </span>в функцию, принимающую неконстантый <span lang="en-us">char 
  *, </span>следует использовать метод <span lang="en-us">GetBuffer().</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre><font SIZE="2">const</font><font SIZE="2" COLOR="#000080"> </font><font SIZE="2">char</font><font SIZE="2" COLOR="#000080"> </font><font SIZE="2">*</font><font SIZE="2" COLOR="#000080">data</font><font SIZE="2">()</font><font SIZE="2" COLOR="#000080"> </font><font SIZE="2">const</font></pre>
</font>
<blockquote>
  <p>Метод для преобразования <span lang="en-us">FarString </span>в
  <span lang="en-us">C-</span>строку. В отличие от метода <span lang="en-us">
  c_str(), </span>для строки нулевой длины возвращает <span lang="en-us">NULL.</span></p>
</blockquote>
<pre><font COLOR="#0000ff">bool</font> <font COLOR="#0000ff">operator</font>== (<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#00008b">rhs</font>) <span lang="en-us">const</span></pre>
<blockquote>
  <p>Оператор сравнения. Помимо этого оператора, <span lang="en-us">FarString
  </span>реализует полный набор операторов сравнения (<span lang="en-us">==, !=, 
  &lt;, &gt;, &lt;=, &gt;=) </span>для всех комбинаций <span lang="en-us">FarString </span>и
  <span lang="en-us">const char *.</span></p>
</blockquote>
<pre><font COLOR="#0000ff">int</font> <font COLOR="#880000">Compare </font>(<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">Str</font>) <font COLOR="#0000ff">const
int</font> <font COLOR="#880000">Compare</font> (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">Str</font>, <font COLOR="#00005e">size_t</font> <font COLOR="#00008b">nLength</font>) <font COLOR="#0000ff">const</font></pre>
<blockquote>
  <p>Функции для сравнения строк с учетом регистра. Возвращают положительное значение, 
    если строка, для которой вызван метод, больше (идет позже в лексикографическом 
    порядке), чем строка <span lang="en-us">Str</span>; отрицательное, если строка 
    меньше <span lang="en-us">Str, </span>или 0 в случае равенства.</p>
</blockquote>
<font COLOR="#0000ff">
<pre>int <font COLOR="#880000">Compare<span lang="en-us">NoCase</span> </font>(const char *<font COLOR="#00008b">Str</font>) const
int <font COLOR="#880000">Compare<span lang="en-us">NoCase</span></font> (const char *<font COLOR="#00008b">Str</font>, <font COLOR="#00005e">size_t</font> <font COLOR="#00008b">nLength</font>) const</pre>
</font>
<blockquote>
  <p>Функции, аналогичные <span lang="en-us">Compare(), </span>но осуществляющие 
  сравнение без учета регистра. Поскольку для сравнения используется функция
  <span lang="en-us">CompareString() </span>из <span lang="en-us">Win32 API,
  </span>русские строки также обрабатываются корректно.</p>
</blockquote>
<pre><font COLOR="#0000ff">char</font> *<font COLOR="#880000">GetBuffer</font> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">nLength</font> = -<font COLOR="#008000">1</font>)</pre>
<blockquote>
  <p>Получает указатель на внутренний буфер строки. Указатель, возвращаемый этим 
  методом, можно передавать в функции, модифицирующие строку; при этом 
  гарантируется, что модифицирована будет только та копия строки, для которой 
  был вызван <span lang="en-us">GetBuffer(). </span>Если функция, модифицирующая 
  строку, увеличит ее длину, то вы можете указать максимальную длину, 
  которую строка будет иметь после модификации, в параметре <span lang="en-us">
  nLength. </span></p>
  <p>Если функция, модифицирующая строку, изменяет также ее длину, после ее 
  вызова необходимо вызвать функцию <span lang="en-us">ReleaseBuffer() </span>
  для корректировки длины строки, кэшируемой внутри класса.</p>
</blockquote>
<font COLOR="#0000ff">
<pre>void <font COLOR="#880000">ReleaseBuffer</font> (int <font COLOR="#00008b">newLength</font> = -<font COLOR="#008000">1</font>)</pre>
</font>
<blockquote>
  <p>Выполняет корректировку длины строки после того, как она была 
  модифицирована внешней функцией. Если новая длина строки точно известна, можно 
  передать ее в параметре <span lang="en-us">newLength. </span>Если
  <span lang="en-us">newLength </span>не указана, длина строки будет определена 
  автоматически при помощи функции <span lang="en-us">strlen().</span></p>
</blockquote>
<pre><font COLOR="#0000ff">char</font> <font COLOR="#0000ff">operator</font>[] (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">index</font>) <font COLOR="#0000ff">const
char</font>&amp; <font COLOR="#0000ff">operator</font>[] (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">index</font>)</pre>
<blockquote>
  <p>Получает символ в строке по указанному индексу. Корректность индекса не 
  проверяется. Второй приведенный вариант оператора позволяет модифицировать 
  символ строки по указанному индексу.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">SetText</font> (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">text</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">length</font>)</pre>
<blockquote>
  <p>Присваивает объекту <span lang="en-us">FarString </span>последовательность 
  символов указанной длины. Если <span lang="en-us">text </span>равен
  <span lang="en-us">NULL</span>, присваивает объекту пустую строку.</p>
</blockquote>
<pre><font COLOR="#0000ff">int</font> <font COLOR="#880000">Length</font>()<span lang="en-us"> const</span></pre>
<blockquote>
  <p>Возвращает длину строки.</p>
</blockquote>
<pre><font COLOR="#0000ff">bool</font> <font COLOR="#880000">IsEmpty</font>()<span lang="en-us"> const </span></pre>
<blockquote>
  <p>Возвращает <span lang="en-us">true, </span>если строка имеет нулевую длину, 
  и <span lang="en-us">false </span>во всех остальных случаях.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">SetLength</font> (<font COLOR="#00005e">size_t</font> <font COLOR="#00008b">newLength</font>)</pre>
<blockquote>
  <p>Расширяет или обрезает строку, с с<span lang="en-us">о</span>хранением 
  содержимого. Если размер строки увеличивается (<span lang="en-us">newLength
  </span>больше текущей длины строки), содержимое буфера после текущего конца 
  строки не определено.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">Empty</font>()</pre>
<blockquote>
  <p>Очищает строку (устанавливает ее длину в 0).</p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> &amp;<font COLOR="#0000ff">operator </font>+= (<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#00008b">str</font>)
<font COLOR="#00005e">FarString</font> &amp;<font COLOR="#0000ff">operator </font>+= (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">s</font>)
<font COLOR="#00005e">FarString</font> &amp;<font COLOR="#0000ff">operator </font>+= (<font COLOR="#0000ff">char</font> <font COLOR="#00008b">c</font>)</pre>
<blockquote>
  <p><span lang="en-us">Д</span>обавляет к строке указанную последовательность символов<span lang="en-us"> 
  (</span>заданную в виде <span lang="en-us">FarString </span>или
  <span lang="en-us">null-terminated) </span>или один символ.</p>
</blockquote>

<pre><font COLOR="#00005e">FarString</font> <font COLOR="#880000">Mid</font> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">nFirst</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">nCount</font>) <font COLOR="#0000ff">const
</font><font COLOR="#00005e">FarString</font> <font COLOR="#880000">Mid</font> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">nFirst</font>) <font COLOR="#0000ff">const</font></pre>
<blockquote>
  <p>Возвращает фрагмент строки, начиная с указанного символа. Вариант функции с 
  двумя параметрами возвращает фрагмент указанной длины, с одним параметром - 
  фрагмент с указанного символа и до конца строки.</p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> <font COLOR="#880000">Left</font>(<font COLOR="#0000ff">int</font> <font COLOR="#00008b">nCount</font>) <font COLOR="#0000ff">const</font></pre>
<blockquote>
  <p>Возвращает фрагмент из первых <span lang="en-us">nCount </span>символов 
  строки<span lang="en-us">.</span></p>
</blockquote>
<pre><font COLOR="#00005e">FarString</font> <font COLOR="#880000">Right</font> (<span lang="en-us"><font color="#0000FF">size_t</font></span> <font COLOR="#00008b">nCount</font>) <font COLOR="#0000ff">const</font></pre>
<blockquote>
  <p>Возвращает фрагмент из последних <span lang="en-us">nCount </span>символов 
  строки.</p>
</blockquote>

<font COLOR="#0000ff">
<pre>int <font COLOR="#880000">Insert</font> (int <font COLOR="#00008b">nIndex</font>, const <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#00008b">Str</font>)
int <font COLOR="#880000">Insert</font> (int <font COLOR="#00008b">nIndex</font>, const char *<font COLOR="#00008b">Str</font>)
int <font COLOR="#880000">Insert</font> (int <font COLOR="#00008b">nIndex</font>, const char *<font COLOR="#00008b">Str</font>, <font COLOR="#00005e">size_t</font> <font COLOR="#00008b">nLength</font>)</pre>
</font>
<blockquote>
  <p>Вставляет указанную последовательность символов в середину строки, начиная 
  с указанного индекса. Последовательность символов может быть задана в виде
  <span lang="en-us">FarString, NULL-terminated </span>строки или массива 
  символов с известной длиной.<span lang="en-us"> </span>Возвращает количество 
  вставленных символов.</p>
</blockquote>

<font COLOR="#0000ff">
<pre>int <font COLOR="#880000">Delete</font> (int <font COLOR="#00008b">nIndex</font>, int <font COLOR="#00008b">nCount</font> = <font COLOR="#008000">1</font>)</pre>
</font>
<blockquote>
<p>Удаляет из середины строки последовательность символов указанной длины, 
начиная с указанного индекса. Возвращает длину строки после удаления. </p>
</blockquote>

<pre><font COLOR="#0000ff">int</font> <font COLOR="#880000">IndexOf</font> (<font COLOR="#0000ff">char</font> <font COLOR="#00008b">c</font>) <font COLOR="#0000ff">const</font></pre>
<blockquote>
<p>Возвращает индекс в строке указанного символа, либо
<span lang="en-us">-1, </span>если строка не содержит указанного символа<span lang="en-us">.</span></p>

</blockquote>

<pre><font COLOR="#0000ff">int</font> <font COLOR="#880000">LastIndexOf</font> (<font COLOR="#0000ff">char</font> <font COLOR="#00008b">c</font>) <font COLOR="#0000ff">const</font></pre>
<blockquote>
  <p>Возвращает индекс последнего вхождения указанного символа в строку, либо -1, 
    если строка не содержит указанного символа.</p>

</blockquote>
<pre><font COLOR="#00005e">FarString</font> <font COLOR="#880000">ToOEM</font>() <font COLOR="#0000ff">const
<font COLOR="#00005e">FarString</font> <font COLOR="#880000">ToANSI</font></font>()<font COLOR="#0000ff"> const</font></pre>

<blockquote>
  <p>Возвращает копию строки, преобразованную в набор символов
  <span lang="en-us">OEM</span> или <span lang="en-us">ANSI, </span>
  соответственно.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">MakeUpper</font>()
<font COLOR="#0000ff">void</font> <font COLOR="#880000">Make<span lang="en-us">Lower</span></font>()</pre>
<blockquote>
  <p>Преобразует строку к верхнему или нижнему реги<span lang="en-us">c</span>тру, 
  соответственно. Преобразование осуществляется на месте, без создания копии 
  строки.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">Trim</font>()</pre>
<blockquote>
  <p>Обрезает начальные и конечные пробелы в строке.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">TrimLeft</font>()</pre>
<blockquote>
  <p>Обрезает начальные пробелы в строке.</p>
</blockquote>
<pre><font COLOR="#0000ff">void</font> <font COLOR="#880000">TrimRight</font>()</pre>
<blockquote>
  <p>Обрезает конечные пробелы в строке.</p>
</blockquote>

</body>

</html>