<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Класс FarMenu</title>
<style>
<!--
.example     { background-color: #E0E0E0 }
-->
</style>
</head>

<body>

<h1 align="center"><span lang="ru">Класс </span>FarMenu</h1>
<p><span lang="ru">Класс </span>FarMenu <span lang="ru">предназначен для показа 
меню. Этот класс представляет собой обертку вокруг функции </span>Menu
<span lang="ru">из </span>FAR API.</p>
<p><span lang="ru">Для того, чтобы вывести меню на экран и дать пользователю 
возможность выбрать один из пунктов, необходимо выполнить следующую 
последовательность действий:</span></p>
<ol>
  <li><span lang="ru">Создать объект </span>FarMenu, <span lang="ru">передав в 
  конструктор строку-заголовок меню, а также опционально флаги и тему помощи, ассоциированную с 
  меню;</span></li>
  <li><span lang="ru">При необходимости задать дополнительные параметры меню 
  (расположение на экране, максимальную высоту, нижний заголовок, дополнительные 
  клавиши для выхода из меню), вызвав соответствующие методы класса </span>
  FarMenu;</li>
  <li><span lang="ru">Добавить в меню необходимые пункты;</span></li>
  <li><span lang="ru">Вызвать метод </span>Show(), <span lang="ru">возвращающий 
  номер выбранного пункта;</span></li>
  <li><span lang="ru">При необходимости проанализировать код клавиши, 
  использованной для выхода из меню </span>(BreakCode).</li>
</ol>
<h2><span lang="ru">Методы</span></h2>
  <pre><b><font COLOR="#00005e">FarMenu</font></b> (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">TitleText</font>, <font COLOR="#0000ff">unsigned</font> <font COLOR="#0000ff">int</font> <font COLOR="#00008b">Flags</font>=<font COLOR="#00008b">FMENU_WRAPMODE</font>, <font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">HelpTopic</font>=<font COLOR="#a000a0">NULL</font>);<font COLOR="#00005e">
<b>FarMenu</b></font> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">TitleLngIndex</font>, <font COLOR="#0000ff">unsigned</font> <font COLOR="#0000ff">int</font> <font COLOR="#00008b">Flags</font>=<font COLOR="#00008b">FMENU_WRAPMODE</font>,<font COLOR="#0000ff"> const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">HelpTopic</font>=<font COLOR="#a000a0">NULL</font>);</pre>
<blockquote>
<p><span lang="ru">Конструктор </span>FarMenu <span lang="ru">существует в двух 
вариантах, получающих строку заголовка в виде </span>const char *
<span lang="ru">или номера строки в</span> LNG<span lang="ru">. Флаги, 
передаваемые в конструктор </span>FarMenu, <span lang="ru">соответствуют флагам 
функции </span>Menu. <span lang="ru">По умолчанию установлен флаг </span>
FMENU_WRAPMODE, <span lang="ru">обеспечивающий переход курсора к первому или 
последнему элементу меню при перемещении его вниз с последнего элемента или 
вверх с первого, соответственно.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>void</font> <b><font COLOR="#880000">SetLocation</font></b> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">X</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">Y</font>);</pre>
<blockquote>
<p><span lang="ru">Метод </span>SetLocation <span lang="ru">позволяет задать 
координаты на экране левого верхнего угла меню. Если этот метод не был вызван, 
координаты меню будут определены автоматически.</span></p>

</blockquote>
<font COLOR="#0000ff">
<pre>void</font> <b><font COLOR="#880000">SetMaxHeight</font></b> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">MaxHeight</font>);</pre>
<blockquote>
  <p><span lang="ru">Метод </span>SetMaxHeight <span lang="ru">позволяет задать 
  максимальную высоту меню в строках. Если этот метод не был вызван, меню будет 
  иметь максимально возможную высоту.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>void</font> <b><font COLOR="#880000">SetBottomLine</font></b> (<font COLOR="#0000ff">const</font> <font COLOR="#00005e">FarString</font> &amp;<font COLOR="#00008b">Text</font>);<font COLOR="#0000ff">
void</font> <b><font COLOR="#880000">SetBottomLine</font></b> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">LngIndex</font>);</pre>
<blockquote>
  <p><span lang="ru">Метод</span> SetBottomLine <span lang="ru">позволяет задать 
  нижний заголовок меню (строку, которая выводится на нижней рамке и может, 
  например, содержать подсказку по использованию меню). Текст заголовка может 
  быть задан как в виде</span> <span lang="ru">строки </span>FarString,
  <span lang="ru">так и в виде номера строки в </span>LNG. <span lang="ru">Если 
  этот метод не был вызван, нижний заголовок не будет выводиться.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>void</font> <b><font COLOR="#880000">SetBreakKeys</font></b> (<font COLOR="#0000ff">int</font> *<font COLOR="#00008b">BreakKeys</font>);
<font COLOR="#0000ff">void</font> <b><font COLOR="#880000">SetBreakKeys</font></b> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">aFirstKey</font>, ...);</pre>
<blockquote>
  <p><span lang="ru">Метод </span>SetBreakKeys <span lang="ru">позволяет задать 
  набор кодов клавиш (</span>VK_*), <span lang="ru">которые могут быть 
  использованы для закрытия меню, помимо стандартных клавиш (</span>Enter, Esc<span lang="ru"> 
  или </span>F10). <span lang="ru">Старшее слово элемента массива может быть или 
  0, или комбинацией флагов </span>PKF_CONTROL, PKF_ALT <span lang="ru">и </span>
  PKF_SHIFT <span lang="ru">для описания комбинаций клавиш.</span></p>
  <p><span lang="ru">Первый вариант метода позволяет вам передать указатель на 
  уже существующий массив кодов:</span></p>
  <pre class="example">int MenuBreakKeys[] = { VK_F4, VK_INSERT, VK_DELETE, 0 };
menu.SetBreakKeys (MenuBreakKeys);</pre>
  <p><span lang="ru">Второй вариант </span>п<span lang="ru">озволяет вам 
  перечислить коды непосредственно при вызове метода:</span></p>
  <pre class="example">menu.SetBreakKeys (VK_F4, VK_INSERT, VK_DELETE, 0);</pre>
  <p><span lang="ru">И в том, и в другом случае список кодов <b>обязательно</b> 
  должен завершаться нулевым байтом.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>int</font> <b><font COLOR="#880000">AddItem</font></b> (<font COLOR="#0000ff">const</font> <font COLOR="#0000ff">char</font> *<font COLOR="#00008b">Text</font>, <font COLOR="#0000ff">bool</font> <font COLOR="#00008b">Selected</font>=<font COLOR="#0000ff">false</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">Checked</font>=<font COLOR="#008000">0</font>);
<font COLOR="#0000ff">int</font> <b><font COLOR="#880000">AddItem</font></b> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">LngIndex</font>, <font COLOR="#0000ff">bool</font> <font COLOR="#00008b">Selected</font>=<font COLOR="#0000ff">false</font>, <font COLOR="#0000ff">int</font> <font COLOR="#00008b">Checked</font>=<font COLOR="#008000">0</font>);</pre>
<blockquote>
  <p><span lang="ru">Метод </span>AddItem <span lang="ru">позволяет добавить 
  пункт в меню. При этом текст пункта может быть задан как в виде </span>const 
  char *, <span lang="ru">так и в виде номера строки в </span>LNG.
  <span lang="ru">Если установлен флаг </span>Selected, <span lang="ru">
  добавляемый пункт меню будет текущим при показе меню.&nbsp; Если параметр
  </span>Checked<span lang="ru"> не равен нулю, перед текстом отображается метка 
  выбора. Если Checked равно 1, то отображается стандартная метка, если больше 1 
  - значение Checked используется как символ метки.</span></p>
  <p><span lang="ru">Метод </span>AddItem <span lang="ru">возвращает номер 
  добавленного пункта меню</span>.</p>
</blockquote>
<font COLOR="#0000ff">
<pre>int</font> <b><font COLOR="#880000">AddSeparator</font></b>();</pre>
<blockquote>
  <p><span lang="ru">Метод </span>AddSeparator <span lang="ru">добавляет в меню 
  разделительную линию. Метод возвращает номер добавленного пункта меню.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>void</font> <b><font COLOR="#880000">ClearItems</font></b>();</pre>
<blockquote>
  <p><span lang="ru">Метод </span>ClearItems <span lang="ru">очищает список 
  пунктов меню, сформированный ранее функциями </span>AddItem <span lang="ru">и
  </span>AddSeparator.</p>
</blockquote>
<font COLOR="#0000ff">
<pre>void</font> <b><font COLOR="#880000">SelectItem</font></b> (<font COLOR="#0000ff">int</font> <font COLOR="#00008b">index</font>);</pre>
<blockquote>
  <p><span lang="ru">Метод </span>SelectItem <span lang="ru">устанавливает 
  выделение на пункт с указанным индексом. Этот пункт будет текущим при показе 
  меню.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>int</font> <b><font COLOR="#880000">Show</font></b>();</pre>
<blockquote>
  <p><span lang="ru">Метод </span>Show <span lang="ru">выводит сформированное 
  меню на экран, позволяет пользователю выбрать элемент и возвращает номер 
  выбранного элемента. Если пользователь отменил меню (нажав </span>Esc
  <span lang="ru">или </span>F10)<span lang="ru">, возвращаемое значение функции 
  будет равно -1.</span></p>
</blockquote>
<font COLOR="#0000ff">
<pre>int</font> <b><font COLOR="#880000">GetBreakCode</font></b>() <font COLOR="#0000ff">const</font></pre>
<blockquote>
  <p><span lang="ru">Метод </span>GetBreakCode <span lang="ru">возвращает индекс 
  в массиве </span>BreakKeys <span lang="ru">клавиши, которая была использована 
  для закрытия меню, или -1 в случае, если меню было закрыто одной из 
  стандартных клавиш.</span></p>
</blockquote>
</font>

</body>

</html>