История
───────

v3.0 beta 10 (11.04.05)
───────────────────────
Новое:
  - Обновил схемы раскраски colorer'а 4 и 5 для FARMail Script;

  Плагин второго уровня "Скрипты":
  - Новые переменные: %origin% и %fullname%, %song_from_file% от 4ekucT'а;
  - Скрипты и scripts.ini обновлены;

Исправлено:
  - FastDownload и FastExpunge не работали с IMAP4;
  - При сбрасывание "Каталоги почты IMAP4" настройка по умолчанию не
    восстанавливалась;

  Плагин второго уровня "Скрипты":
  - Когда use_organization=1 сообщение не составлялось корректно;
  - %name% не работал в new скрипте.


v3.0 beta 9 (10.04.05)
──────────────────────
Новое:
  - "From  date" сейчас добавляется ко всем отправленным сообщениям;
  - Прилагается PluginMacroses.reg от Tim Sobolev;
  - Теперь префикс mail: открывает панель FARMail;
  - Подтверждение о посылке двоичных файлов при отправке сообщений
    из файловых панелей, если в сообщении была найдена служебная информация;

  Плагин второго уровня "Скрипты":
  - Новые функции: setini, setsel, editorstate;
  - Функция setpos была дополнена возможностью возвращать текущую позицию
    курсора в редакторе;
  - Скрипты теперь понимают конструкции вида %name%, %far%, %farmail%,
    %windows%, %date%, %date_sent%, %time%, %song% и %stat% в наборах
    приветствия и подписи файла scripts.ini. Первичная реализация -
    Tim Sobolev;
  - Появилось новое поле в scripts.ini: reply_to, задающее адрес ответа для
    указанного шаблона;
  - Большинство скриптов было обновлено;

  Плагин второго уровня "Адресная книга":
  - Строки форматирования меню были помещены в языковый файл для обеспечения
    возможности изменения внешнего вида меню по своему вкусу;

Исправлено:
  - Хак против серверов не отвечающих OK (221) на сообщение QUIT. Такое
    поведение служило причиной ошибки передачи данных, возникающей после
    отправки сообщения.


v3.0 beta 8 (19.03.05)
──────────────────────
Новое:
  Плагин второго уровня "Скрипты":
  - Новая функция: getini;
  - Общий файл настроек для скриптов - scripts.ini;
  - Скрипты могут кодировать заголовок сообщений (настраиваемо из scripts.ini);
  - Обновлены все скрипты;

Исправлено:
  - FARMail падал если попытка подключится на SSL сервер была неудачной;
  - Несколько дополнительных исправлений в поддержке SSL;
  - Неправильно выставлялся порт при переходе из POP3 в IMAP4 и [x] SSL;
  - Некоторые плагины второго уровня были привязаны к msvcrt.dll;
  - Теперь в полях параметров почтового ящика нельзя вводить ":";
  - В диалог посылки сообщений вставлялся мусор при попытке добавить адресата
    из адресной книги когда плагин "Адресная книга" не установлен;

  Плагин второго уровня "Скрипты":
  - random(0) приводил к падению Divide by zero;
  - В sprintf не освобождалась память;
  - Различные мелкие исправления;

  Плагин второго уровня "Адресная книга":
  - Плагин падал если добавление нового адресата в пустую адресную книгу было
    отменено (в связи с ошибкой в ФАРе падение может произойти и сейчас);
  - Различные мелкие исправления.


v3.0 beta 7 (12.12.04)
──────────────────────
Новое:
  - Экспериментальная поддержка SSL;
  - Плагин выходит под лицензией GNU GPL;

  Плагин второго уровня "Скрипты":
  - Новая функция: encodeheader;
  - Поддержка Foobar 2000 v0.8 (более старые версии больше не поддерживаются);

Исправлено:
  - Более точная обработка пробелов и CRLF'ов в заголовке письма.


v3.0 beta 6 (27.12.03)
──────────────────────
Новое:
  - Новый плагин второго уровня: "Открыть аттач";
  - При посылке письма если какое-то поле заголовка пустое то оно не будет
    посылаться;
  - Для FastDownload всегда добавляется "From дата" в начале файла;
    даже если качаем не в unix mailbox;
  - Новое ключевое слово "%org%" для установки поля Organization в сообщении;

  Плагин второго уровня "Скрипты":
  - Новый скрипт: resend.fms;
  - Новая функция: sprintf;
  - Все скрипты были переделаны, теперь они генерируют Messag-ID, могут
    создавать письма по шаблонам и некоторые другие улучшения;

  Плагин второго уровня "Помощник":
  - Left/Right работают как Home/End;
  - Лист больше не сворачивается;
  - Диалог открытия файла подстраивает свой размер под размер консоли;
  - Shift-Enter работает как и в FAR-е;

Исправлено:
  - Для многострочных полей заголовка пробелы (включая CRLF) перед текстом на
    каждой строке выкидываются (раньше конвертировались в один пробел);

  Плагин второго уровня "Скрипты":
  - В некоторых редких случаях переменные неправильно инициализировались;
  - Поле заголовка references создавалось не совсем корректно;

  Плагин второго уровня "Помощник":
  - При нажатии на ".." курсор позиционируется на директории из которой вышли;
  - Мог зависнуть при отсутствии %end% в файле.


v3.0 beta 5 (12.04.03)
──────────────────────
Новое:
  - Для работы плагина необходим Far 1.70 бета 5 или выше;
  - Поддержка UIDL на POP3 серверах, что позволяет сохранять состояния
    сообщений (прочитанное, новое и помеченное) между соединениями к почтовому
    ящику;
  - Сообщения удалённые с POP3 помечаются как удаленные на панели плагина и
    перечитывание почтового ящика не происходит;
  - Версия плагина теперь показывается по клавише F7. По F3 показывается
    статистика для выделенных почтовых ящиков;
  - Новое ключевое слово "%reply%" для установки поля Reply-To в сообщении;
  - Макрос %curdate[:format]% для присваивания имен скачиваемым сообщениям;
  - Возможность задавать директории при присваивании имен скачиваемым
    сообщениям;
  - Для обхода ошибки некоторых POP3 серверов теперь можно контролировать,
    как плагин получает заголовок сообщения;
  - При быстром очищение показывается прогресс. Также увеличена скорость
    очищения для IMAP4;
  - При быстром скачивание показывается название обрабатываемого в текущий
    момент почтового ящика;
  - В диалоге посылки сообщений показывается количество приаттаченных файлов
    и пользовательских полей заголовка;
  - Несколько косметических изменений;

  Плагин второго уровня "Скрипты":
  - Переписан с нуля для повышения скорости работы и облегчения дальнейшего
    развития;
  - Синтаксис проверяется более жестко;
  - При синтаксической ошибке скрипт открывается во встроенном редакторе и
    курсор позиционируется в окрестность ошибки;
  - Новые функции: winampstate, winampsong, header, usrmenu, exit и
    addressbook;
  - Процедуры;
  - Операторы --/++;
  - Комментарии в стиле C/C++;
  - Файлы для функций fileline и filecount ищутся таким же образом, как и
    сами скрипты;
  - Усовершенствованы функции перенаправления;
  - Обновлены все скрипты;
  - Схема раскраски скриптов FARMail для Colorer (Extra\fms*.hrc);

  Плагин второго уровня "Адресная книга":
  - Быстрый поиск адресов с использованием фильтра;

Исправлено:
  - Ctrl-Break должен всегда срабатывать;
  - Пустое поле "To:" объединялось с полем "Subject:";
  - В диалоге конфигурации были перепутаны местами "Быстрый просмотр: байт" и
    "Быстрый просмотр: строк";
  - Посылка/прием больших сообщений производилась с более медленной скоростью,
    чем это возможно;
  - Усовершенствован механизм записи сообщений в unix mailbox;
  - При ошибке записи скачиваемого сообщения на диск процесс останавливается и
    выдается предупреждающее сообщение;
  - Ошибки кодирования/декодирования между различными кодировками;
  - Другие мелкие ошибки;
  - Ошибки в Script.reg и esc_message.xml;

  Плагин второго уровня "Адресная книга":
  - Мусор в диалоге добавить/редактировать адрес;
  - Невозможно было удалить первый адрес.


v3.0 beta 4 (20.07.02)
──────────────────────
Исправлено:
  - Скачивание сообщений с IMAP4 сервера не работало под Windows 95/98;
  - Не всегда добавлялось расширение файлов сообщений при скачивании с IMAP4
    сервера;
  - Более корректно поддерживается формат unix mailbox файлов;
  - Во всех меню курсор при попытке перемещения выше первого пункта или
    ниже последнего переходит соответственно к последнему или к первому
    пункту.


v3.0 beta 3 (12.07.02)
──────────────────────
Новое:
  - Полный контроль над тем, как будет послано сообщение с помощью команд
    заголовка;
  - При посылке бинарного файла или файла содержащего нетекстовые символы из
    редактора, метод кодировки по умолчанию будет выбран как
    "Текст/Html в Base64", а не как "Файл-аттач";

  Плагин второго уровня "Скрипты":
  - История в диалоге от usrinput;
  - Обновлены все скрипты;

Исправлено:
  - Отвалилась замена не легальных символов при переименовании сообщений при
    скачивании;
  - При использование "быстрого скачивания" данный путь обрабатывался даже если
    скачивание происходило в файл формата unix mailbox;
  - Сообщения посланные из редактора как Текст/Html в Base64 не правильно
    кодировались;


v3.0 beta 2 (05.07.02)
──────────────────────
Исправлено:
  - FARMail падал под Windows 95/98 при наличии плагинов второго уровня;
  - Быстрое скачивние и очищение работали некорректно из командной строки;

  Плагин второго уровня "Скрипты":
  - Команда "Выполнить скрипт" была недоступна, если не было определено ни
    одного скрипта;


v3.0 beta (02.07.02)
────────────────────
Новое:
  - Исходящие сообщения могут сохранятся в формате unix mailbox;
  - Команда "быстрое очищение" позволяет быстро удалить сообщения из почтового
    ящика. Может вызываться из командной строки;
  - Команда "быстрое скачивание" позволяет быстро скачать все сообщения из
    почтового ящика. Скачиваемые сообщения могут быть сохранены в формате unix
    mailbox. Может вызываться из командной строки;
  - FARMail поддерживает плагины второго уровня;
  - Функции, вынесенные в плагины второго уровня: "Скрипты", "Адресная книга",
    "Фильтр";
  - Новый плагин второго уровня: "Помощник";
  - "Цитировать" теперь скрипт для плагина второго уровня "Скрипты";
  - Поддерживается "multipart/related" (RFC 2387). Включается ключевым словом
    "related";
  - Многострочные поля в заголовке с использованием ключевого слова
    "appendheader";
  - Новый дизайн диалога посылки сообщения;
  - Показ сообщений нулевой длины для POP3 может настраиваться. По умолчанию
    выключено;
  - Предварительное скачивание заголовков сообщений для POP3 может быть
    отключено;
  - Неограниченное количество приаттаченных файлов и пользовательских полей
    заголовка;
  - Разделитель для нескольких адресатов изменен на ",";
  - Новый дизайн для диалогов конфигурации;
  - Настройка вида статусной строки;
  - Предупреждение при посылке из редактора бинарного файла. По умолчанию
    включено;
  - "Искать служебную информацию в письме" включено по умолчанию;
  - При сохранении исходящих сообщений возможно сохранять Message-ID. Работает
    только для SMTP серверов, которые возвращают Message-ID при посылке. Более
    подробно описано в файле справки;
  - Минимум обязательных полей при создании нового ящика.

  Плагин второго уровня "Скрипты":
  - Определяемый юзером список скриптов для быстрого доступа;
  - Возможность задать директорию для поиска скриптов;
  - Несколько новых скриптов. Старые скрипты обновлены;
  - Много новых функций для работы с выделением, файлами и многое другое;
  - Усовершенствованный диалог запуска скрипта;

  Плагин второго уровня "Адресная книга":
  - Может быть открыт из редактора;
  - Разделитель для нескольких адресатов изменен на ",";
  - Возможность  задать  директорию  где  хранится  файл-адресная
    книга;

  Плагин второго уровня "Фильтр":
  - Возможность задать директорию для поиска фильтров;

Исправлено:
  - Значительно ускорена посылка больших файлов из редактора;
  - Очень редкий Access Violation при посылке сообщения;
  - Везде, где вводятся имена файлов можно использовать кавычки;
  - Объединены истории для SMTP и POP3/IMAP4 серверов;
  - Ключевые слова типа "%xxx%" могут использоваться в выражениях:
    "header yyy = %xxx%" без потери кодировки;
  - Исправлено большое количество проблем с кодировками при
    кодировании/декодировании;
  - При декодировании длинной темы письма добавлялась лишняя точка;

  Плагин второго уровня "Скрипты":
  - Решены проблемы с кодировками. Для корректной работы скрипты необходимо
    писать только в кодировке OEM;


v2.4 (19.04.02)
───────────────
Новое:
  - Начиная с этой версии плагин разрабатывается FARMail Group;
  - Добавлены горячие клавиши в тех местах, где они отсутствовали. В связи с
    этим некоторые старые горячие клавиши изменены. Проверьте пожалуйста свои
    макросы;
  - Состояние переключателя "Присваивать уникальные названия" сохраняется и он
    включен по умолчанию;
  - Кодировка детектируется для всего письма целиком, а не отдельно для каждого
    поля заголовка и тела письма;
  - При посылке из редактора - кодировка берется у фара, а не детектируется;
  - Добавлена опция "Добавить в меню плагинов";
  - Добавлена возможность задать конкретные таблицы для кодировок по умолчанию
    (KOI-8 и Windows-1251), показываемых в диалоге посылки сообщения;
  - Если необходима авторизация с SMTP сервером, а логин с паролем отсутствуют,
    происходит их запрос;
  - Возможно задавать поле From;
  - Возможна временная активация полей CC и BCC в диалоге посылки сообщения.
    Активация производится горячей клавишей;
  - При изменении опции "Кодировка исходного текста" не измененные поля
    заголовка перекодируются на лету;
  - Каждый диалог настроек имеет свою тему помощи;

Исправлено:
  - Неправильно считался CPS при скачивании;
  - Сильное падение CPS при скачивании сообщений больших объемов (POP3 and
    IMAP4);
  - Иногда расширение файлов сообщений не добавлялось при скачивании с IMAP4;
  - Сохраняются поля to/cc/bcc, если отказ в адресной книге;
  - При посылке нескольких файлов одним сообщением - проверяется charset;
  - FARMail понимает: attach "filename";
  - Пароли сохраняются в бинарном виде, это решает проблемы с
    импортированием/экспортированием регистра;


v2.3 (29.10.00)
───────────────

Новое:
 - ESMTP авторизация (LOGIN, PLAIN);
 - Прикрепление файлов к письму указанием их названий в блоке %start%...%end%
   (директивой "ATTACH")
 - Директивы начала и конца блока технической информации можно изменить
   в реестре Windows;
 - Новые баги;

Исправлено:
 - зависание программы на длинных полях заголовка в quoted-printable;
 - сохранение неполных сообщений при ошибках отправки по SMTP;
 - регистрозависимый анализ некоторых полей заголовка;
 - теперь при приеме перекодируется поле "Date" заголовка (если не 7 бит);
 - и другие исправления;


v2.2 (22.06.00)
───────────────

Новое:
 - Создание, переименование и удаление каталогов на IMAP4 серверах;
 - Копирование и перемещение писем в другие каталоги (IMAP4);
 - Поддержка комментариев в адресной книге;
 - Настройка порядка полей, разделителя и поля сортировки адресной книги;
 - Настройка кодировки по умолчанию исходящих писем;
 - Панелька с версией программы в списке почтовых ящиков по F3;
 - Фильтрация сообщений по набору шаблонов, заданному в файле-фильтре.

Исправлено:
 - Полные пути в названиях аттачей;
 - Неверная кодировка при отсылке нескольких файлов в одном письме;
 - Перекодировка названий аттачей;
 - ...и еще кучка разных ошибок;


v2.1 (02.05.00)
───────────────

Новое:
 - Опция "Анализировать все" при массовой отсылке сообщений;
 - Выбор сообщений по шаблону поля в заголовке письма (по Alt-F6);
 - Возможность составления названий сообщений из темы письма, отправителя и т.п.;
 - Возможные каталоги почты IMAP4 задаются в настройках;
 - Кэширование заголовков писем;
 - Функции date() и time() в скриптах;

Исправлено:
 - Переделан алгоритм поддержки активности соединения, теперь должен работать
   стабильно;
 - Падение программы при работе с почтой после отсылки письма из редактора;
 - Неверный размер сообщений после удаления некоторых (не всех) писем из
   ящика;
 - Неверный CPS на больших (>2Mb) файлах;
 - Разница во времени с UTC не учитывала переход на летнее время;
 - Неопределение кодировки windows-1251;
 - Отвалившаяся проверка версии FAR;
 - Ну и еще некоторое кол-во доработок, которые я уже не помню :)


v2.0 (27.02.00)
───────────────

Новое:
 - Выполнение скриптов: можно написать собственные скрипты для
   обработки писем;
 - Можно поместить часть технической информации (получатель, тема и т.п.)
   непосредственно в текст письма;
 - Поддержка дополнительных полей в заголовке письма;
 - Докачка сообщений после обрыва соединения (только для IMAP4);
 - Поддержка дополнительных кодировок (до 3х штук);
 - Возможность установить дату и время файла по дате и времени сообщения;
 - Сохранение всех отправленных сообщений в одном каталоге;
 - Возможность автоматически присвоить уникальные номера
   скачиваемым сообщениям;

Исправлено:
 - Мусор в названии панели после запуска FARMail в редакторе;
 - Журнализация идет сразу с записью на диск, так что даже при
   вылете программы в журнале что-то должно остаться;


v1.51 (23.01.00)
────────────────

Исправлено:
 - Проблема с обрывом SMTP-соединения под Windows 95 - соединение
   периодически разрывалось в самом начале. Причина заключалась в
   ошибке в Windows sockets под Windows 95. Теоретически то же самое
   могло происходить и в POP3 и IMAP4 соединениях (хотя мне не удалось
   повторить ни разу).


v1.5 (10.01.00)
───────────────

Новое:
 - Отправка сразу нескольких файлов одним письмом;
 - Быстрый просмотр/редактирование (только небольшой части сообщения);
 - Дата и время письма теперь хранятся в форме даты и времени файла,
   можно использовать стандартные типы колонок FAR даты/времени;
 - Работа с адресной книгой из всех панелей плагина (Shift-F1);
 - Опционально - поля "carbon copy" и "blind carbon copy";

Исправлено:
 - Ctrl-Brk теперь работает гораздо более стабильнее, убивая все
   открытые сокеты. Хотя изредка все равно не срабатывает...
 - Доработки в интерфейсе (описания функциональных клавиш,
   диалог копирования, статус-строка и т.п.) и мелкие исправления;

Замечание:
 - Если есть необходимость при работе с этим плагином выделять
   приаттаченные к письму файлы или смотреть кодированный текст -
   можно попробовать консольный вьювер MailView, последняя версия
   должна быть на http://alsea.euro.ru/.


v1.4a (13.11.99)
────────────────

Новое:
 - Переделана работа с windows sockets. Теперь можно разорвать
   соединение в любой момент, нажав Ctrl-Break. В настройках
   программы можно задать таймаут соединения. Возможно появились
   еще и новые баги :)
 - Поддержка IMAP4;

Исправлено:
 - Иногда неполностью читался ответ POP3 сервера, что приводило к
   "сдвигу" в принимаемых данных, соответственно неверной обработке
   ответов и т.п.


v1.3 (release) (29.10.99)
─────────────────────────

Новое:
 - Отправка письма из редактора FAR;
 - "Цитирование" текста в редакторе;
Исправлено:
 - Добавил проверку соответствия версии FAR;


v1.3b (24.10.99)
────────────────

Новое:
 - Кодировка по умолчанию для входящей почты;
Исправлено:
 - "organisation" -> "organization". Пардон :)
 - Логин/пароль запрашиваются всегда, если они не были введены в настройках;
 - Установка фокуса ввода в пустое поле панели логина;
 - Подстановки введенного руками логина и пароля в настройки больше нет;
 - Имя пользователя и организация могут быть в 8-битной кодировке;
 - Исправил перекодировку имен получателей, добавил перекодировку для
   организации и имени пользователя;
 - Кое-какие мелкие поправки в ведении лога;
 - Номера портов расширил до 5 знаков;


v1.3a (03.10.99)
────────────────

Новое:
 - Можно указывать нескольких получателей;
 - Что-то, похожее на адресную книгу;
 - Поле "Organisation" в заголовке;
 - Поддержка поля "X-Sun-Text-Type" в приходящих сообщениях;
 - Почтовый ящик по умолчанию;
Исправлено:
 - Обработка нулевой разницы по времени с Гринвичем;
 - Обработка имен отправителей в base64/quoted-printable;
 - Понимание значения поля charset в кавычках;
 - Названия сообщений с пустым расширением;
 - Ну и разные мелкие исправления;


v1.2 (29.08.99)
───────────────

Новое:
 - Полностью настраиваемая панель сообщений: типы и ширина колонок
   задаются в настройках программы;
 - Вывод даты и темы сообщений в панели;
 - Раскодирование тем сообщений в base64 и quoted-printable в соответствии
   с RFC 1522;
 - Перекодировка тем сообщений из KOI-8 и Windows-1251 кодировок;
 - В названиях сообщений можно указывать фиксированное число нулей для
   правильной сортировки;
 - Фоновая поддержка активности в POP3 сессиях;
 - Пересоединение по Ctrl-R;
 - Отправка почты без установки соединения с POP3-сервером;
Исправлено:
 - Обработка ответа сервера;


v1.11 (21.08.99)
────────────────

Исправлены: порча памяти в предыдущих версиях; выдача сообщения об ошибке
 при построении списка сообщений на некоторых серверах;


v1.1 (20.08.99)
───────────────

Исправлены: работа с почтовыми ящиками под Windows NT, простановка
 <CRLF> в сообщениях;
Новое: шифрование пароля, сообщения о статусе соединения, отправка HTML,
 обработка кодировки и перекодировка, история тем сообщений, пересоединение
 по Shift-F7, обработка исключений.


v1.0 (16.08.99)
───────────────

Ну это уже похоже на нормальный плагин :-) Новый интерфейс, настройки в
реестре, SMTP,...


v0.5 (27.07.99)
───────────────

Собственно первая более-менее работающая версия, сырая до невозможности.
